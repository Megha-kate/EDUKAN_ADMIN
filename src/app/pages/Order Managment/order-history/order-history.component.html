<app-submenu-list [ActiveMenu]='3'></app-submenu-list>
<section class="main-wrapper prod-list-page">
    <!-- <app-submenu-list  [ActiveMenu] = '3'></app-submenu-list> -->
    <div class="l-container">
        <div class="search-order-id float-right">
            <span class="material-icons"> search </span>
            <input type="text" class="textfield" placeholder="Search by OTC Number" (keydown)="SearchOTc($event)"
                style="padding-left: 56px !important; width: 300px;" (focusout)="showOtc($event)"
                [formControl]="AllFilters.controls['otc_number']">
            <div class="btn-filter" ngbDropdown #myDrop="ngbDropdown">
                <button class="btn-filter" id="filterPopup" ngbDropdownToggle><img src="./assets/images/filter.svg"
                        alt="" /></button>
                <div ngbDropdownMenu aria-labelledby="filterPopup" class="filter-popup">
                    <div class="arrow"></div>
                    <form [formGroup]="AllFilters">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-4 border-right">
                                    <li class="sidebar-cards__item">
                                        <ul class="sidebar-cards__chk-list">
                                            <li class="sidebar-cards__chk-list-item chkbox">
                                                <input (change)="changedatefilter('Today')" name="A" type="radio"
                                                    id="aa">
                                                <label for="aa"> Today</label>
                                            </li><br>
                                            <li class="sidebar-cards__chk-list-item chkbox">
                                                <input name="A" type="radio" id="bb"
                                                    (change)="changedatefilter('Sevenday')">
                                                <label for="bb"> Last 7 days</label>
                                            </li><br>
                                            <li class="sidebar-cards__chk-list-item chkbox">
                                                <input name="A" type="radio" id="cc"
                                                    (change)="changedatefilter('thirtyDays')" [checked]="isThirtyDays">
                                                <label for="cc">Last 30 days</label>

                                            </li><br>
                                            <li class="sidebar-cards__chk-list-item chkbox">
                                                <input (change)="changedatefilter('Custom')" name="A" type="radio"
                                                    id="dd" [value]="ShowCustom">
                                                <label for="dd">Custom</label>
                                            </li>

                                            <li class="sidebar-cards__chk-list-item" [hidden]="!ShowCustom">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <div class="form-group m-0 calendar">
                                                            <div class="input-group">
                                                                <input class="form-control"
                                                                    [formControl]="AllFilters.controls['from_date']"
                                                                    placeholder="yyyy-mm-dd" [readonly]="true" name="dp"
                                                                    ngbDatepicker #d="ngbDatepicker">
                                                                <div class="input-group-append">
                                                                    <button class="btn btn-outline-secondary calendar"
                                                                        (click)="d.toggle()" type="button"><span
                                                                            class="material-icons">
                                                                            calendar_today
                                                                        </span></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="form-group m-0">
                                                            <div class="input-group calendar">
                                                                <input class="form-control"
                                                                    [formControl]="AllFilters.controls['to_date']"
                                                                    placeholder="yyyy-mm-dd" [readonly]="true" name="dp"
                                                                    ngbDatepicker #d1="ngbDatepicker">
                                                                <div class="input-group-append1">
                                                                    <button class="btn btn-outline-secondary calendar"
                                                                        (click)="d1.toggle()" type="button"><span
                                                                            class="material-icons">
                                                                            calendar_today
                                                                        </span></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </li>
                                        </ul>
                                    </li>
                                    <li [hidden]="currDiv === 'InProcess'">
                                        <div class="srch-box">
                                            <label>OTC Number</label><br />
                                            <input type="text" [formControl]="AllFilters.controls['otc_number']"
                                                placeholder="OTC Number" class="textfield">
                                            <!-- <span class="material-icons"> search </span> -->
                                        </div>
                                    </li>
                                    <li [hidden]="currDiv === 'InProcess'">
                                        <div class="srch-box">
                                            <label>Status</label><br />
                                            <select [formControl]="AllFilters.controls['status']" class="textfield">
                                                <option value="new">New</option>
                                                <option value="closed">Closed</option>
                                                <option value="open">Open</option>
                                                <option value="accepted">Accepted</option>
                                                <option value="shipped">Shipped</option>
                                                <option value="declined">Declined</option>
                                                <option value="pending">Pending</option>
                                                <option value="cancelled">Cancelled</option>
                                                <option value="invoiced">Invoiced</option>
                                            </select>
                                        </div>
                                    </li>
                                </div>
                                <div class="col-4 border-right">
                                    <li [hidden]="currDiv === 'InProcess'">
                                        <div class="srch-box">
                                            <label>Customer</label><br />
                                            <input autocomplete="off" (keyup)="custtype()"
                                                [formControl]="AllFilters.controls['account_name']"
                                                style="width: max-content !important;" placeholder="Search Customer...."
                                                class="textfield" type="text" matInput>
                                            <!-- <span class="material-icons">search</span> -->
                                        </div>
                                        <ul class="sidebar-cards__chk-list">
                                            <form [formGroup]="CustomerList">
                                                <li *ngFor="let CustData of Accountnamedata;let k=index;"
                                                    class="form-chk-list-item chkbox">
                                                    <input [formControl]="CustomerList.controls[CustData.account_id]"
                                                        (change)="filterMyOptionsCustname(CustData,$event)" name="A"
                                                        type="checkbox" id="cust_{{k}}">
                                                    <label for="cust_{{k}}"
                                                        title="{{CustData.account_name}}">{{CustData.account_name.substr(0,25)}}</label>

                                                </li>
                                            </form>
                                        </ul>
                                    </li>
                                    <li [hidden]="isdistributor">
                                        <div class="srch-box">
                                            <label>Distributor</label><br>
                                            <input autocomplete="off" (keyup)="Distributortype()"
                                                [formControl]="AllFilters.controls['org_name']"
                                                style="width: max-content !important;" placeholder="Search Distributor"
                                                class="textfield" type="text" matInput>
                                            <!-- <span class="material-icons"> search </span> -->
                                        </div>
                                        <ul class="sidebar-cards__chk-list">
                                            <form [formGroup]="DistributorList">
                                                <li *ngFor="let DistLit of DistributorData ; let i=index;"
                                                    class="form-chk-list-item chkbox">
                                                    <input
                                                        [formControl]="DistributorList.controls[DistLit.distributor_id]"
                                                        (change)="dstfilteradd(DistLit,$event)" name="B" type="checkbox"
                                                        id="Dist_{{i}}">
                                                    <label for="Dist_{{i}}"
                                                        title="{{DistLit.distributor_name}}">{{DistLit.distributor_name.substr(0,25)}}</label>
                                                </li>
                                            </form>
                                        </ul>
                                    </li>

                                    <li *ngIf="isDivisionVisible == true">
                                        <div class="srch-box">
                                            <label>Division</label> <br />
                                            <form [formGroup]="DivisionList">
                                    <li *ngFor="let divi of Division; let j=index;" class="form-chk-list-item chkbox">
                                        <input type="checkbox" [formControl]="DivisionList.controls[divi.div_id]"
                                            id="div_{{j}}" (change)="divisionfilteradd(divi,$event)">
                                        <label for="div_{{j}}"
                                            title="{{divi.div_name}}">{{divi.div_name.substr(0,25)}}</label>
                                    </li>
                    </form>
                </div>
                </li>
            </div>
            <div class="col-4 border-right">
                <div [hidden]="currDiv === 'InProcess'">
                    <li>
                        <div class="srch-box">
                            <label>Region</label><br />
                            <select [formControl]="AllFilters.controls['region']" class="textfield">
                                <option value="North">North</option>
                                <option value="West">West</option>
                                <option value="East">East</option>
                                <option value="South">South</option>
                            </select>
                        </div>
                    </li>
                    <li>
                        <div class="srch-box">
                            <label>State</label><br />
                            <select class="textfield"
                            [formControl]="AllFilters.controls['state_code']"
                            (change)="onChange($event.target.value)">
                            <option hidden></option>

                            <option *ngFor="let SateData of statenamedata;">
                                {{SateData.state_name}}</option>
                        </select>
                        </div>
                    </li>
                    <li>
                        <div class="srch-box">
                            <label>District</label><br />
                            <input type="text" [formControl]="AllFilters.controls['district']" placeholder="District"
                                class="textfield">
                        </div>
                    </li>
                    <li>
                        <div class="srch-box">
                            <label>City</label><br />
                            <input type="text" [formControl]="AllFilters.controls['city']" placeholder="City"
                                class="textfield">
                        </div>
                    </li>
                </div>
                <div *ngIf="currDiv === 'InProcess'">
                    <li>
                        <div class="srch-box">
                            <label>Order Number</label><br />
                            <input type="text" [formControl]="AllFilters.controls['order_number']"
                                placeholder="Order Number" class="textfield">
                            <!-- <span class="material-icons"> search </span> -->
                        </div>
                    </li>
                    <li>
                        <div class="srch-box">
                            <label>Status</label><br />
                            <select [formControl]="AllFilters.controls['order_status']" class="textfield">
                                <option value="In-Process">In process</option>
                                <option value="Failure">Failed</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                    </li>
                </div>
                <li>
                    <div class="srch-box">
                        <button class="btn btn-outline-primary" (click)="Search()">Search</button> &nbsp;
                        <button class="btn btn-outline-primary" (click)="resetALl()">Reset</button>
                    </div>
                </li>
            </div>
        </div>
    </div>
    </form>
    </div>
    </div>
    </div>

    <ul class="l-page-nav__list--icon">
        <li class="l-page-nav__list--icon-item"><a (click)="onClick(1)" [ngClass]="{'active': tab===1}">
                <i><svg xmlns="http://www.w3.org/2000/svg" width="24" height="26" viewBox="0 0 24 26">
                        <g fill="none" fill-rule="evenodd">
                            <g fill="#d9dadf" fill-rule="nonzero">
                                <g>
                                    <g>
                                        <g>
                                            <path
                                                d="M12.186 0L24 5.93v13.34L12.052 25.2 0 19.27V5.93L12.186 0zM1.5 8.218v10.135L12 23.518V12.66l-.006.004L1.5 8.218zm21-.001l-9 3.81V22.82l9-4.465V8.216zM6.748 4.297L1.702 6.754l10.293 4.298 4.437-1.851-9.683-4.904zm5.427-2.64L8.42 3.485l9.76 4.987 4.137-1.726-10.14-5.089z"
                                                transform="translate(-43 -279) translate(29 265) translate(14 6) translate(0 8)" />
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>
                </i>
                <div class="txt">
                    {{eDukaanCount}} <span>e-Dukaan Orders</span></div>
            </a></li>
        <li class="l-page-nav__list--icon-item"><a (click)="onClick(2)" [ngClass]="{'active': tab===2}">
                <i><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32"
                        height="34" viewBox="0 0 32 34">
                        <defs>
                            <path id="gyln81heya"
                                d="M16 .5c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16S7.163.5 16 .5zm0 1.6C8.047 2.1 1.6 8.547 1.6 16.5S8.047 30.9 16 30.9s14.4-6.447 14.4-14.4S23.953 2.1 16 2.1z" />
                        </defs>
                        <g fill="none" fill-rule="evenodd">
                            <g>
                                <g>
                                    <g>
                                        <g transform="translate(-193 -275) translate(193 274) translate(0 1.5)">
                                            <mask id="ff6a77pzhb" fill="#fff">
                                                <use xlink:href="#gyln81heya" />
                                            </mask>
                                            <use fill="#D4D5DB" xlink:href="#gyln81heya" />
                                            <path fill="#FFA518" stroke="#FFF" stroke-width="3"
                                                d="M15 17.5L25.138 0.5 15 -2.5z" mask="url(#ff6a77pzhb)" />
                                        </g>
                                        <path fill="#FFA518" d="M16.75 21.75v2h-1.5v-2h1.5zm0-11.75v10h-1.5V10h1.5z"
                                            transform="translate(-193 -275) translate(193 274) translate(0 1.5)" />
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>
                </i>
                <div class="txt">
                    {{crmCount}} <span>CRM Orders</span> </div>
            </a></li>
        <li class="l-page-nav__list--icon-item"><a (click)="onClick(3)" [ngClass]="{'active': tab===3}">
                <i><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32"
                        height="36" viewBox="0 0 32 36">
                        <defs>
                            <path id="kx4emi4jva"
                                d="M16 .5c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16S7.163.5 16 .5zm0 1.6C8.047 2.1 1.6 8.547 1.6 16.5S8.047 30.9 16 30.9s14.4-6.447 14.4-14.4S23.953 2.1 16 2.1z" />
                        </defs>
                        <g fill="none" fill-rule="evenodd">
                            <g>
                                <g>
                                    <g>
                                        <g>
                                            <g>
                                                <g
                                                    transform="translate(-361 -274) translate(350 268) translate(11 5.5) translate(0 1) translate(0 .5) translate(0 .5)">
                                                    <mask id="rk1oeee80b" fill="#fff">
                                                        <use xlink:href="#kx4emi4jva" />
                                                    </mask>
                                                    <use fill="#D4D5DB" xlink:href="#kx4emi4jva" />
                                                    <path fill="#F40D0D" stroke="#FFF" stroke-width="3"
                                                        d="M15 17.5L28.473 2.1 30.4 -0.5 15 -2.5z"
                                                        mask="url(#rk1oeee80b)" />
                                                </g>
                                            </g>
                                            <g fill="#F40D0D">
                                                <path
                                                    d="M8.712.977l1.061 1.06L6.06 5.75l3.713 3.712-1.06 1.061L5 6.81l-3.712 3.713-1.061-1.06L3.94 5.75.227 2.038 1.287.977 5 4.69 8.712.977z"
                                                    transform="translate(-361 -274) translate(350 268) translate(11 5.5) translate(0 1) translate(11 12)" />
                                            </g>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>

                </i>
                <div class="txt">
                    {{hiRpmCount}} <span>HiRPM Orders</span></div>
            </a></li>
        <li class="l-page-nav__list--icon-item"><a (click)="onClick(4)" [ngClass]="{'active': tab===4}">
                <i><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32"
                        height="35" viewBox="0 0 32 35">
                        <defs>
                            <path id="vyjgc20cua"
                                d="M16 .5c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16S7.163.5 16 .5zm0 1.6C8.047 2.1 1.6 8.547 1.6 16.5S8.047 30.9 16 30.9s14.4-6.447 14.4-14.4S23.953 2.1 16 2.1z" />
                        </defs>
                        <g fill="none" fill-rule="evenodd">
                            <g>
                                <g>
                                    <g>
                                        <g
                                            transform="translate(-524 -275) translate(524 273) translate(0 2.5) translate(0 .5)">
                                            <mask id="a2y1157qub" fill="#fff">
                                                <use xlink:href="#vyjgc20cua" />
                                            </mask>
                                            <use fill="#D9DADF" xlink:href="#vyjgc20cua" />
                                            <path fill="#0DC1F4" stroke="#EAEAF1" stroke-width="3"
                                                d="M15 17.5L39.087 4.319 15 -2.5z" mask="url(#a2y1157qub)" />
                                        </g>
                                        <g fill="#080C5C" fill-rule="nonzero">
                                            <path
                                                d="M13.798.26c-.082-.084-.195-.13-.312-.13H.594c-.243 0-.44.197-.44.44L.169 14c0 .135.062.263.168.346l1.599 1.274c.16.128.387.128.548 0l1.32-1.054 1.32 1.054c.16.126.385.126.545 0l1.32-1.054 1.32 1.054c.079.062.176.095.275.095.108.006.215-.028.3-.095l1.32-1.054 1.32 1.054c.16.128.387.128.547 0l1.6-1.27c.114-.079.185-.208.189-.347l.075-13.42c.001-.122-.048-.24-.137-.323zm-.818 13.527l-1.162.922-1.32-1.054c-.16-.126-.385-.126-.545 0l-1.32 1.054-1.32-1.054c-.078-.061-.175-.095-.275-.094-.1 0-.195.033-.273.094l-1.32 1.054-1.32-1.054c-.16-.126-.386-.126-.546 0L2.26 14.71l-1.161-.922L1.034 1.01h12.01l-.064 12.777z"
                                                transform="translate(-524 -275) translate(524 273) translate(0 2.5) translate(9 9.5)" />
                                            <path
                                                d="M2.024 2.974h3.124c.243 0 .44-.197.44-.44s-.197-.44-.44-.44H2.024c-.243 0-.44.197-.44.44s.197.44.44.44zM2.024 4.796h3.124c.243 0 .44-.197.44-.44s-.197-.44-.44-.44H2.024c-.243 0-.44.197-.44.44s.197.44.44.44zM8.815 4.796h3.124c.243 0 .44-.197.44-.44s-.197-.44-.44-.44H8.815c-.243 0-.44.197-.44.44s.197.44.44.44zM11.612 7.26H2.468c-.243 0-.44.197-.44.44s.197.44.44.44h9.144c.243 0 .44-.197.44-.44s-.197-.44-.44-.44zM2.468 10.01h7.652c.243 0 .44-.197.44-.44s-.197-.44-.44-.44H2.468c-.243 0-.44.197-.44.44s.197.44.44.44zM11.134 11H2.468c-.243 0-.44.197-.44.44s.197.44.44.44h8.666c.243 0 .44-.197.44-.44s-.197-.44-.44-.44z"
                                                transform="translate(-524 -275) translate(524 273) translate(0 2.5) translate(9 9.5)" />
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>
                </i>
                <div class="txt"> {{ProgressCount}} <span>In-Process Orders</span></div>
            </a></li>
    </ul>

    <div *ngIf="!isdistributor">
        <div *ngIf="currDiv === 'e-order'">
            <div class="tags d-flex justify-content-end mb-4">
                <ul class="tags__list" fxFlex="70" style="margin-right: 20px;">
                    <li *ngFor="let Filterrow of Filterarray"><a style=" cursor:default">{{Filterrow.Value}} <img
                                [hidden]="Filterrow.Key == 'from_date'" (click)="onRemoveFilter(Filterrow)"
                                src="./assets/images/tag-close.svg" /></a></li>

                </ul>
                <!-- <ul class="tags__list" fxFlex="30"> -->
                <!-- <select class="form-select" aria-label="Default select example" (change)="EOrderExport($event)">
                        <option selected value="" disabled>Select</option>
                        <option value="Excel">Excel</option> -->
                <!-- <option value="1">Pdf</option>
                            <option value="2">Dock</option> -->
                <!-- </select> -->
                <!-- <a  (click)="EOrderExport()"                                
                            class="material-icons ml-2">
                            file_download </a> -->
                <!-- <button class="mat-icon-button mat-accent" matTooltip="Export to Excel" (click)="EOrderExport();">
                                <span class="mat-button-wrapper">
                                  <i class="fa fa-file-excel fa-lg"></i>
                                </span>
                            </button>
                </ul> -->
                <ul class="tags__list" fxFlex="30" style="color: darkolivegreen;" matTooltip="Export to Excel"
                    (click)="EOrderExport();">
                    <span class='fa-stack fa-lg'>
                        <i class='fas fa-file-excel fa-pull-right fa-2x'
                            style="margin-top: -59px;margin-left:37px;"></i>

                    </span>
                </ul>


            </div>

            <div class="l-content w-100 pl-0">
                <div class="tbl-reports card-shadow bg-white h-100">
                    <div class="l-tbl-accordion overflow-auto">
                        <div class="w-100 border-0 p-3">
                            <div class="table-responsive">
                                <table class="l-tbl">
                                    <tr class="main-tr">
                                        <td>
                                            <div class=" d-flex align-items-center" style="width: max-content;">
                                                <span>Order Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>OTC Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Status</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Customer Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Account Id</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Distributor Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>#Parts & Qty</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Date </span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Order Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Invoice Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Total Invoice</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Region</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>State</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>PO Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Accidental Chassis Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Accidental Registration No</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Payment Mode</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                    </tr>
                                    <ng-container *ngIf="orderrow.length >0">

                                        <tr *ngFor="let item of orderrow" class="click-tr">
                                            <td class="text-nowrap" [frozenLeft]="true">
                                                <div class="td-wrapp">{{item?.order_number}}</div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp"
                                                    style=" text-decoration-line: underline; color: blue;cursor: pointer; "
                                                    (click)="details(item)"> {{ item?.otc_number }}</div>
                                            </td>
                                            <td>
                                                <div>
                                                    {{item?.status}}
                                                </div>
                                            </td>

                                            <td>
                                                <div class="td-wrapp d-flex align-items-start flex-column">
                                                    {{ item?.account_name}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-start flex-column">
                                                    {{ item?.account_id}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-start flex-column">
                                                    {{ item?.distributor_name }}
                                                </div>
                                            </td>

                                            <td>
                                                <div class="td-wrapp d-flex align-items-start flex-column">
                                                    {{ item?.total_line_items}} parts {{ item?.total_quantity }} Qty
                                                    <!-- <a href="#" class="mt-1 d-flex align-items-center clr-orange" id="vehicle-sublist-click-2" (click)="toggle_vehicle_list('vehicle-sublist-2', 'vehicle-list-sublist-2')">Pending : 1 part 4 qty <img class="ml-2" width="12"
                                                        src="../../assets/images/down-arw.svg" alt=""></a> -->
                                                </div>
                                            </td>
                                            <!-- <div class="xpand-row" id="vehicle-sublist-2">
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">Ordered</div>
                                                                <div class="col-6 text-right">Pending</div>
                                                            </div>
            
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            Pending value
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">1.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">2.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">3.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">4.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">5.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            <a href="#" class="btn-link clr-light-blue font-weight-bolder">View
                                                                more</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                            </div> -->

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.order_date | date :'dd-MM-yyyy hh:mm:ss a'}}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.order_amount | number:'1.2-2' }}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.invoice_amount | number:'1.2-2' }}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="item.invoice_count > 0">
                                                    <!-- [hidden]="!item.invoice_count !=0" -->
                                                    {{ item?.invoice_count }} Invoice <a href="javascript:void(0)"
                                                        id="dropdownBasic1" placement="bottom" [ngbPopover]="popContent"
                                                        class="invoices-btn" style="margin-left: 10px;"
                                                        (click)="InvoiceDetails(item)">
                                                        <img src="../../assets/images/invoice.svg" alt="">
                                                    </a>
                                                    <ng-template class="invoices-popover" #popContent
                                                        style="width:400px">
                                                        <ul style="width: 150% !important;" class="invoices__list">
                                                            <li *ngFor="let Detailrow of invoiceDetails">
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <a (click)="openInvoicePopup(Detailrow)"
                                                                            style="color: blue;">#{{Detailrow?.invoice_no}}</a><small>{{Detailrow?.total_part_count}}
                                                                            part, {{Detailrow?.total_quantity}}
                                                                            Qty</small>
                                                                    </div>
                                                                    <div class="col-8 d-flex align-items-center">(₹)
                                                                        {{Detailrow?.invoice_amount| number:'1.2-2' }}
                                                                        <a href="javascript:void(0)"
                                                                            *ngIf="Detailrow.invoice_pdf_url != '' "
                                                                            (click)="Invoiceclick(Detailrow)"
                                                                            class="material-icons ml-2">
                                                                            file_download </a>
                                                                        <!--  -->
                                                                        <a href="javascript:void(0)"
                                                                            *ngIf="Detailrow.invoice_pdf_url == ''"
                                                                            (click)="ERROR('Invoice Copy Not generated')"
                                                                            style="color: red;"
                                                                            title="Invoice Copy Not generated"
                                                                            class="material-icons ml-2">
                                                                            info_outline </a>
                                                                    </div>
                                                                </div>
                                                            </li>

                                                        </ul>
                                                    </ng-template>
                                                </div>
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="item.invoice_count == 0">
                                                    {{ item?.invoice_count }} Invoice
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ item?.region }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ item?.state}}
                                                </div>
                                            </td>

                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{item?.po_number}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{item?.accedential_chassis_no}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{item?.accedential_licence_no}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.payment_method =='COD' ? 'On Credit': item?.payment_method
                                                    =='COD_LOYALTY' ? 'On Credit & Loyalty':item?.payment_method
                                                    =='WIRE_TRANSFER' ? 'Online Transfer' : item?.payment_method
                                                    =='WIRE_TRANSFER_LOYALTY' ? 'Online Transfer & Loyalty':
                                                    item?.payment_method}}
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="orderrow.length == 0">
                                        <tr>
                                            No Data Found
                                        </tr>
                                    </ng-container>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="paging" style="margin-bottom: 40px;margin-top: 20px;">
                    <app-pagination [activePage]="currentPage" [totalRecords]="totalrecord" *ngIf="totalrecord>10"
                        [recordsPerPage]="noofrecordsperpage" (onPageChange)="pageChange($event)"
                        [showrecords]="showRecords"></app-pagination>
                </div>
            </div>
        </div>

        <div *ngIf="currDiv === 'CRMOrder'">
            <div class="tags d-flex justify-content-end mb-4">
                <ul class="tags__list" fxFlex="70" style="margin-right: 20px;">
                    <li *ngFor="let Filterrow of Filterarray"><a style=" cursor:default">{{Filterrow.Value}} <img
                                [hidden]="Filterrow.Key == 'from_date'" (click)="onRemoveFilter(Filterrow)"
                                src="./assets/images/tag-close.svg" /></a></li>

                </ul>

                <ul class="tags__list" fxFlex="30" style="color: darkolivegreen;" matTooltip="Export to Excel"
                    (click)="CRMExport();">
                    <span class='fa-stack fa-lg'>
                        <i class='fas fa-file-excel fa-pull-right fa-2x'
                            style="margin-top: -59px;margin-left:37px;"></i>

                    </span>
                </ul>
            </div>
            <div class="l-content w-100 pl-0">
                <div class="tbl-reports card-shadow bg-white h-100">
                    <div class="l-tbl-accordion overflow-auto">
                        <div class="w-100 border-0 p-3">
                            <div class="table-responsive">
                                <table class="l-tbl">
                                    <tr class="main-tr">
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>OTC Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Customer Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Account Id</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Distributor Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span> Order Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <!-- <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Total Invoice</span>
                                                <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i>
                                            </div>
                                        </td> -->
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Date</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Status</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                    </tr>
                                    <ng-container *ngIf="orderrow.length >0">

                                        <tr *ngFor="let row of orderrow" class="click-tr">
                                            <td class="text-nowrap">
                                                <div class="td-wrapp" [hidden]="!row.total_line_items !=0"
                                                    style=" text-decoration-line: underline; color: blue;cursor: pointer;"
                                                    (click)="details(row)">{{ row?.otc_number }}</div>
                                                <div class="td-wrapp" [hidden]="!row.total_line_items ==0">{{
                                                    row?.otc_number }}</div>
                                                <!-- <div class="td-wrapp" style=" text-decoration-line: underline; color: blue;cursor: pointer;"
                                                    (click)="details(row)">{{row?.otc_number }}</div> -->

                                            </td>
                                            <td>
                                                <div class="td-wrapp">{{row?.account_name}}</div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">{{row?.account_id}}</div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">{{ row?.distributor_name}}</div>
                                            </td>

                                            <td>
                                                <div class="td-wrapp">
                                                    {{ row.order_amount | number:'1.2-2' }}
                                                </div>
                                            </td>
                                            <!-- <td>
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="row.invoice_count > 0">
                                                    {{ row?.invoice_count }} Invoice <a href="javascript:void(0)"
                                                        id="dropdownBasic1" placement="bottom" [ngbPopover]="popContent"
                                                        class="invoices-btn" style="margin-left: 10px;"  (click)="InvoiceDetails(row)">
                                                        <img src="../../assets/images/invoice.svg" alt="">
                                                    </a>
                                                    <ng-template class="invoices-popover" #popContent>
                                                        <ul style="width: 120% !important;" class="invoices__list">
                                                            <li *ngFor="let Detailrow of invoiceDetails">
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <a (click)="openInvoicePopup(Detailrow)"
                                                                            style="color: blue;">{{Detailrow?.invoice_no}}</a><small>{{Detailrow?.total_part_count}}
                                                                            part, {{Detailrow?.total_quantity}}
                                                                            Qty</small>
                                                                    </div>
                                                                    <div class="col-8 d-flex align-items-center">(₹)
                                                                        {{Detailrow?.invoice_amount| number:'1.2-2' }}
                                                                        <a href="javascript:void(0)"
                                                                            *ngIf="Detailrow.invoice_pdf_url != '' "
                                                                            (click)="Invoiceclick(Detailrow)"
                                                                            class="material-icons ml-2">
                                                                            file_download </a>
                                                                        <a href="javascript:void(0)"
                                                                            (click)="ERROR('Invoice Copy Not generated')"
                                                                            style="color: red;"
                                                                            title="Invoice Copy Not generated"
                                                                            *ngIf="Detailrow.document_status !== 'uploaded'"
                                                                            class="material-icons ml-2">
                                                                            info_outline </a>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </ng-template>
                                                </div>
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="row.invoice_count == 0">
                                                    {{ row?.invoice_count }} Invoice
                                                </div>
                                            </td> -->

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.order_date | date :'dd-MM-yyyy hh:mm:ss a'}}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.status }}
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="orderrow.length == 0">
                                        <tr>
                                            No Data Found
                                        </tr>
                                    </ng-container>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="paging" style="margin-bottom: 40px;margin-top: 20px;">
                    <app-pagination [activePage]="currentPage" [totalRecords]="totalrecord" *ngIf="totalrecord>10"
                        [recordsPerPage]="noofrecordsperpage" (onPageChange)="pageChange($event)"
                        [showrecords]="showRecords"></app-pagination>
                </div>
            </div>
        </div>

        <div *ngIf="currDiv === 'HiRPM'">
            <div class="tags d-flex justify-content-end mb-4">
                <ul class="tags__list">
                    <li *ngFor="let Filterrow of Filterarray"><a style="cursor:default">{{Filterrow.Value}} <img
                                [hidden]="Filterrow.Key == 'from_date'" (click)="onRemoveFilter(Filterrow)"
                                src="./assets/images/tag-close.svg" /></a></li>
                </ul>
            </div>
            <div class="l-content w-100 pl-0">
                <div class="tbl-reports card-shadow bg-white h-100">
                    <div class="l-tbl-accordion overflow-auto">
                        <div class="w-100 border-0 p-3">
                            <div class="table-responsive" *ngIf="totalrecord > 0">
                                <table class="l-tbl">
                                    <tr class="main-tr">
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>OTC Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Customer Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Account Id</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Total Invoice</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Date</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Status</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                    </tr>
                                    <ng-container *ngIf="orderrow.length >0">

                                        <tr *ngFor="let row of orderrow" class="click-tr">
                                            <td class="text-nowrap">
                                                <div class="td-wrapp" [hidden]="!row.total_line_items !=0"
                                                    style=" text-decoration-line: underline; color: blue;cursor: pointer;"
                                                    (click)="clickCrmOrder(row)">{{ row?.otc_number }}</div>
                                                <div class="td-wrapp" [hidden]="!row.total_line_items ==0">{{
                                                    row?.otc_number }}</div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp">{{row?.account_name}}</div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.account_id}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ row.order_amount | number:'1.2-2' }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="row.invoice_count > 0">
                                                    <!-- [hidden]="!item.invoice_count !=0" -->
                                                    {{ row?.invoice_count }} Invoice <a href="javascript:void(0)"
                                                        id="dropdownBasic1" placement="bottom" [ngbPopover]="popContent"
                                                        class="invoices-btn" style="margin-left: 10px;">
                                                        <img src="../../assets/images/invoice.svg" alt="">
                                                    </a>
                                                    <ng-template class="invoices-popover" #popContent>
                                                        <ul style="width: 120% !important;" class="invoices__list">
                                                            <li *ngFor="let Detailrow of invoiceDetails">
                                                                <div class="row">
                                                                    <div class="col-6">
                                                                        <a (click)="openInvoicePopup(Detailrow)"
                                                                            style="color: blue;">#{{Detailrow?.invoice_no}}</a><small>2
                                                                            Part , 50 Qty</small>
                                                                    </div>
                                                                    <div class="col-6 d-flex align-items-center">(₹)
                                                                        5698
                                                                        <a href="javascript:void(0)"
                                                                            class="material-icons ml-2">
                                                                            file_download </a>
                                                                        <a href="javascript:void(0)"
                                                                            (click)="ERROR('Invoice Copy Not generated')"
                                                                            style="color: red;"
                                                                            title="Invoice Copy Not generated"
                                                                            *ngIf="Detailrow.document_status !== 'uploaded'"
                                                                            class="material-icons ml-2">
                                                                            info_outline </a>
                                                                    </div>
                                                                </div>
                                                            </li>

                                                        </ul>
                                                    </ng-template>
                                                </div>
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="row.invoice_count == 0">
                                                    {{ row?.invoice_count }} Invoice
                                                </div>
                                            </td>

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.order_date | date :'dd-MM-yyyy hh:mm:ss a'}}
                                                </div>
                                            </td>

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.status }}
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="orderrow.length == 0">
                                        <tr>
                                            No Data Found
                                        </tr>
                                    </ng-container>
                                </table>
                            </div>
                            <div class="table-responsive" *ngIf="totalrecord == 0">
                                No Data Found

                            </div>
                        </div>
                    </div>
                </div>
                <div class="paging" style="margin-bottom: 40px;margin-top: 20px;">
                    <app-pagination [activePage]="currentPage" [totalRecords]="totalrecord" *ngIf="totalrecord>10"
                        [recordsPerPage]="noofrecordsperpage" (onPageChange)="pageChange($event)"
                        [showrecords]="showRecords"></app-pagination>
                </div>
            </div>
        </div>

        <div *ngIf="currDiv === 'InProcess'">
            <div class="tags d-flex justify-content-end mb-4">
                <ul class="tags__list">
                    <li *ngFor="let Filterrow of Filterarray"><a style="cursor:default">{{Filterrow.Value}} <img
                                [hidden]="Filterrow.Key == 'from_date'" (click)="onRemoveFilter(Filterrow)"
                                src="./assets/images/tag-close.svg" /></a></li>
                </ul>
            </div>
            <div class="l-content w-100 pl-0">
                <div class="tbl-reports card-shadow bg-white h-100">
                    <div class="l-tbl-accordion overflow-auto">
                        <div class="w-100 border-0 p-3">
                            <div class="table-responsive">
                                <table class="l-tbl">
                                    <tr class="main-tr">
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Order Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Date</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Customer Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Account Id</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Distributor Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Division Id</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Status</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Payment Mode</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                    </tr>
                                    <ng-container *ngIf="rowFailed.length >0">

                                        <tr *ngFor="let row of rowFailed" class="click-tr">
                                            <td class="text-nowrap">
                                                <div class="td-wrapp" (click)="failedClick(row)"
                                                    style=" text-decoration-line: underline; color: blue;cursor: pointer;"
                                                    routerLinkActive="active"> {{ row?.order_number }}</div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp"> {{ row?.order_date | date :'dd-MM-yyyy hh:mm:ss
                                                    a' }}</div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{row?.account_name}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{row?.otc_account_id}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp ">
                                                    {{row?.otc_related_org}}
                                                </div>
                                            </td>

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{row?.otc_return_to_account_id}}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.status }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ row?.total_amount | number }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ row?.payment_method =='COD' ? 'On Credit': row?.payment_method
                                                    =='COD_LOYALTY' ? 'On Credit & Loyalty':row?.payment_method
                                                    =='WIRE_TRANSFER' ? 'Online Transfer' : row?.payment_method
                                                    =='WIRE_TRANSFER_LOYALTY' ? 'Online Transfer & Loyalty':
                                                    row?.payment_method}}
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="rowFailed.length == 0">
                                        <tr>
                                            No Data Found
                                        </tr>
                                    </ng-container>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="paging" style="margin-bottom: 40px;margin-top: 20px;">
                    <app-pagination [activePage]="currentPage" [totalRecords]="totalrecord" *ngIf="totalrecord>10"
                        [recordsPerPage]="noofrecordsperpage" (onPageChange)="pageChange($event)"
                        [showrecords]="showRecords"></app-pagination>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="isdistributor">
        <div *ngIf="currDiv === 'e-order'">
            <div class="tags d-flex justify-content-end mb-4">
                <ul class="tags__list" fxFlex="70" style="margin-right: 20px;">
                    <li *ngFor="let Filterrow of Filterarray"><a style="cursor:default">{{Filterrow.Value}} <img
                                [hidden]="Filterrow.Key == 'from_date'" (click)="onRemoveFilter(Filterrow)"
                                src="./assets/images/tag-close.svg" /></a></li>
                </ul>

                <!-- <select class="form-select" aria-label="Default select example" (change)="EOrderExport($event)">
                            <option selected value="" disabled>Select</option>
                            <option value="Excel">Excel</option>
                         
                        </select> -->
                <ul class="tags__list" fxFlex="30" style="color: darkolivegreen; width: 100px;"
                    matTooltip="Export to Excel" (click)="EOrderExport();">
                    <span class='fa-stack fa-lg'>
                        <i class='fas fa-file-excel fa-pull-right fa-2x'></i>

                    </span>
                </ul>



            </div>
            <div class="l-content w-100 pl-0">
                <div class="tbl-reports card-shadow bg-white h-100">
                    <div class="l-tbl-accordion overflow-auto">
                        <div class="w-100 border-0 p-3">
                            <div class="table-responsive">
                                <table class="l-tbl">
                                    <tr class="main-tr">
                                        <td>
                                            <div class=" d-flex align-items-center">
                                                <span>Order Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>OTC Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Status</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Customer Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Account Id</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>#Part & Qty </span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Date </span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Order Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Invoice Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td class="text-nowrap">
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Total Invoice</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Region</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>State</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>PO Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Accidental Chassis Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Accidental Registration No</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Payment Mode</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                    </tr>
                                    <ng-container *ngIf="orderrow.length >0">

                                        <tr *ngFor="let item of orderrow" class="click-tr">
                                            <td class="text-nowrap">
                                                <div class="td-wrapp">{{
                                                    item?.order_number}}</div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp"
                                                    style=" text-decoration-line: underline; color: blue;cursor: pointer;"
                                                    (click)="details(item)"> {{ item?.otc_number }}</div>
                                            </td>
                                            <td>
                                                <div>
                                                    {{item?.status}}
                                                </div>
                                            </td>

                                            <td>
                                                <div class="td-wrapp d-flex align-items-start flex-column">
                                                    {{ item?.account_name}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-start flex-column">
                                                    {{ item?.account_id}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-start flex-column">
                                                    {{ item?.total_line_items}} parts {{ item?.total_quantity }} Qty
                                                    <!-- <a href="#" class="mt-1 d-flex align-items-center clr-orange" id="vehicle-sublist-click-2" (click)="toggle_vehicle_list('vehicle-sublist-2', 'vehicle-list-sublist-2')">Pending : 1 part 4 qty <img class="ml-2" width="12"
                                                        src="../../assets/images/down-arw.svg" alt=""></a> -->
                                                </div>
                                            </td>
                                            <!-- <div class="xpand-row" id="vehicle-sublist-2">
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">Ordered</div>
                                                                <div class="col-6 text-right">Pending</div>
                                                            </div>
            
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            Pending value
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">1.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">2.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">3.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">4.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp text-right w-100">5.</div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            #885433012829 <small>Engine coolant </small>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            <div class="row">
                                                                <div class="col-6 text-right">14</div>
                                                                <div class="col-6 text-right">4</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp">
                                                            ₹ 4488.00
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="click-tr">
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        <div class="td-wrapp d-flex flex-column">
                                                            <a href="#" class="btn-link clr-light-blue font-weight-bolder">View
                                                                more</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                            </div> -->

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.order_date | date :'dd-MM-yyyy hh:mm:ss a'}}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.order_amount | number:'1.2-2' }}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.invoice_amount | number:'1.2-2' }}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="item.invoice_count > 0">
                                                    <!-- [hidden]="!item.invoice_count !=0" -->
                                                    {{ item?.invoice_count }} Invoice <a href="javascript:void(0)"
                                                        id="dropdownBasic1" placement="bottom" [ngbPopover]="popContent"
                                                        class="invoices-btn" style="margin-left: 10px;"
                                                        (click)="InvoiceDetails(item)">
                                                        <img src="../../assets/images/invoice.svg" alt="">
                                                    </a>
                                                    <ng-template class="invoices-popover" #popContent
                                                        style="width:400px">
                                                        <ul style="width: 150% !important;" class="invoices__list">
                                                            <li *ngFor="let Detailrow of invoiceDetails">
                                                                <div class="row">
                                                                    <div class="col-4"><a
                                                                            (click)="openInvoicePopup(Detailrow)"
                                                                            style="color: blue;">#{{Detailrow?.invoice_no}}</a><small>2
                                                                            Part , 50 Quantity or Qty</small></div>
                                                                    <div class="col-8 d-flex align-items-center">(₹)
                                                                        {{Detailrow?.invoice_amount | number:'1.2-2' }}
                                                                        <a href="javascript:void(0)"
                                                                            *ngIf="Detailrow.invoice_pdf_url != '' "
                                                                            (click)="Invoiceclick(Detailrow)"
                                                                            class="material-icons ml-2">
                                                                            file_download </a>

                                                                        <a href="javascript:void(0)"
                                                                            *ngIf="Detailrow.invoice_pdf_url == ''"
                                                                            (click)="ERROR('Invoice Copy Not generated')"
                                                                            style="color: red;"
                                                                            title="Invoice Copy Not generated"
                                                                            class="material-icons ml-2">
                                                                            info_outline </a>
                                                                    </div>
                                                                </div>
                                                            </li>

                                                        </ul>
                                                    </ng-template>
                                                </div>
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="item.invoice_count == 0">
                                                    {{ item?.invoice_count }} Invoice
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ item?.region }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ item?.state}}
                                                </div>
                                            </td>

                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{item?.po_number}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{item?.accedential_chassis_no}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{item?.accedential_licence_no}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ item?.payment_method =='COD' ? 'On Credit': item?.payment_method
                                                    =='COD_LOYALTY' ? 'On Credit & Loyalty':item?.payment_method
                                                    =='WIRE_TRANSFER' ? 'Online Transfer' : item?.payment_method
                                                    =='WIRE_TRANSFER_LOYALTY' ? 'Online Transfer & Loyalty':
                                                    item?.payment_method}}
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="orderrow.length == 0">
                                        <tr>
                                            No Data Found
                                        </tr>
                                    </ng-container>
                                    <!-- <div class="xpand-row" id="vehicle-sublist-2">
                                            <tr class="click-tr">
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        <div class="row">
                                                            <div class="col-6 text-right">Ordered</div>
                                                            <div class="col-6 text-right">Pending</div>
                                                        </div>
        
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        Pending value
                                                    </div>
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                            <tr class="click-tr">
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <div class="td-wrapp text-right w-100">1.</div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp d-flex flex-column">
                                                        #885433012829 <small>Engine coolant </small>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        <div class="row">
                                                            <div class="col-6 text-right">14</div>
                                                            <div class="col-6 text-right">4</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        ₹ 4488.00
                                                    </div>
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                            <tr class="click-tr">
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <div class="td-wrapp text-right w-100">2.</div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp d-flex flex-column">
                                                        #885433012829 <small>Engine coolant </small>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        <div class="row">
                                                            <div class="col-6 text-right">14</div>
                                                            <div class="col-6 text-right">4</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        ₹ 4488.00
                                                    </div>
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                            <tr class="click-tr">
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <div class="td-wrapp text-right w-100">3.</div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp d-flex flex-column">
                                                        #885433012829 <small>Engine coolant </small>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        <div class="row">
                                                            <div class="col-6 text-right">14</div>
                                                            <div class="col-6 text-right">4</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        ₹ 4488.00
                                                    </div>
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                            <tr class="click-tr">
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <div class="td-wrapp text-right w-100">4.</div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp d-flex flex-column">
                                                        #885433012829 <small>Engine coolant </small>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        <div class="row">
                                                            <div class="col-6 text-right">14</div>
                                                            <div class="col-6 text-right">4</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        ₹ 4488.00
                                                    </div>
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                            <tr class="click-tr">
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <div class="td-wrapp text-right w-100">5.</div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp d-flex flex-column">
                                                        #885433012829 <small>Engine coolant </small>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        <div class="row">
                                                            <div class="col-6 text-right">14</div>
                                                            <div class="col-6 text-right">4</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="td-wrapp">
                                                        ₹ 4488.00
                                                    </div>
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                            <tr class="click-tr">
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    <div class="td-wrapp d-flex flex-column">
                                                        <a href="#" class="btn-link clr-light-blue font-weight-bolder">View
                                                            more</a>
                                                    </div>
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                        </div> -->
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="paging" style="margin-bottom: 40px;margin-top: 20px;">
                    <app-pagination [activePage]="currentPage" [totalRecords]="totalrecord" *ngIf="totalrecord>10"
                        [recordsPerPage]="noofrecordsperpage" (onPageChange)="pageChange($event)"
                        [showrecords]="showRecords"></app-pagination>
                </div>
            </div>
        </div>

        <div *ngIf="currDiv === 'CRMOrder'">
            <div class="tags d-flex justify-content-end mb-4">
                <ul class="tags__list" fxFlex="70" style="margin-right: 20px;">
                    <li *ngFor="let Filterrow of Filterarray"><a style="cursor:default">{{Filterrow.Value}} <img
                                [hidden]="Filterrow.Key == 'from_date'" (click)="onRemoveFilter(Filterrow)"
                                src="./assets/images/tag-close.svg" /></a></li>
                </ul>
                <!-- <ul class="tags__list" fxFlex="30">
                    <select class="form-select" aria-label="Default select example" (change)="CRMExport($event)">
                        <option selected value="" disabled>Select</option>
                        <option value="Excel">Excel</option>
                       
                    </select>
                </ul> -->


                <ul class="tags__list" fxFlex="30" style="color: darkolivegreen; width: 100px;"
                    matTooltip="Export to Excel" (click)="EOrderExport();">
                    <span class='fa-stack fa-lg'>
                        <i class='fas fa-file-excel fa-pull-right fa-2x'></i>

                    </span>
                </ul>
            </div>
            <div class="l-content w-100 pl-0">
                <div class="tbl-reports card-shadow bg-white h-100">
                    <div class="l-tbl-accordion overflow-auto">
                        <div class="w-100 border-0 p-3">
                            <div class="table-responsive">
                                <table class="l-tbl">
                                    <tr class="main-tr">
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>OTC Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Customer Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Total Invoice</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Date</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Status</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                    </tr>
                                    <ng-container *ngIf="orderrow.length >0">

                                        <tr *ngFor="let row of orderrow" class="click-tr">
                                            <td class="text-nowrap">
                                                <div class="td-wrapp" [hidden]="!row.total_line_items !=0"
                                                    style=" text-decoration-line: underline; color: blue;cursor: pointer;"
                                                    (click)="details(row)">{{ row?.otc_number }}</div>
                                                <div class="td-wrapp" [hidden]="!row.total_line_items ==0">{{
                                                    row?.otc_number }}</div>
                                                <!-- <div class="td-wrapp" style=" text-decoration-line: underline; color: blue;cursor: pointer;"
                                                    (click)="details(row)">{{row?.otc_number }} </div> -->
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp">{{row?.account_name}}</div>
                                            </td>

                                            <td>
                                                <div class="td-wrapp">
                                                    {{ row.order_amount | number:'1.2-2' }}
                                                </div>
                                            </td>

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="row.invoice_count > 0">
                                                    <!-- [hidden]="!item.invoice_count !=0" -->
                                                    {{ row?.invoice_count }} Invoice <a href="javascript:void(0)"
                                                        id="dropdownBasic1" placement="bottom" [ngbPopover]="popContent"
                                                        class="invoices-btn" style="margin-left: 10px;"
                                                        (click)="InvoiceDetails(row)">
                                                        <img src="../../assets/images/invoice.svg" alt="">
                                                    </a>
                                                    <ng-template class="invoices-popover" #popContent
                                                        style="width:400px">
                                                        <ul style="width: 150% !important;" class="invoices__list">
                                                            <li *ngFor="let Detailrow of invoiceDetails">
                                                                <div class="row">
                                                                    <div class="col-4">
                                                                        <a (click)="openInvoicePopup(Detailrow)"
                                                                            style="color: blue;">#{{row?.invoice_no}}</a><small>{{Detailrow?.total_part_count}}
                                                                            part, {{Detailrow?.total_quantity}}
                                                                            Qty</small>
                                                                    </div>
                                                                    <div class="col-8 d-flex align-items-center">(₹)
                                                                        {{Detailrow?.invoice_amount| number:'1.2-2' }}
                                                                        <a href="javascript:void(0)"
                                                                            *ngIf="Detailrow.invoice_pdf_url != '' "
                                                                            (click)="Invoiceclick(Detailrow)"
                                                                            class="material-icons ml-2">
                                                                            file_download </a>
                                                                        <!--  -->
                                                                        <a href="javascript:void(0)"
                                                                            *ngIf="Detailrow.invoice_pdf_url == ''"
                                                                            (click)="ERROR('Invoice Copy Not generated')"
                                                                            style="color: red;"
                                                                            title="Invoice Copy Not generated"
                                                                            class="material-icons ml-2">
                                                                            info_outline </a>
                                                                    </div>
                                                                </div>
                                                            </li>

                                                        </ul>
                                                    </ng-template>
                                                </div>
                                                <div class="td-wrapp d-flex align-items-center"
                                                    *ngIf="row.invoice_count == 0">
                                                    {{ row?.invoice_count }} Invoice
                                                </div>
                                            </td>



                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.order_date | date :'dd-MM-yyyy hh:mm:ss a'}}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.status }}
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="orderrow.length == 0">
                                        <tr>
                                            No Data Found


                                        </tr>

                                    </ng-container>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="paging" style="margin-bottom: 40px;margin-top: 20px;">
                    <app-pagination [activePage]="currentPage" [totalRecords]="totalrecord" *ngIf="totalrecord>10"
                        [recordsPerPage]="noofrecordsperpage" (onPageChange)="pageChange($event)"
                        [showrecords]="showRecords"></app-pagination>
                </div>
            </div>
        </div>

        <div *ngIf="currDiv === 'InProcess'">
            <div class="tags d-flex justify-content-end mb-4">
                <ul class="tags__list">
                    <li *ngFor="let Filterrow of Filterarray"><a style="cursor:default">{{Filterrow.Value}} <img
                                [hidden]="Filterrow.Key == 'from_date'" (click)="onRemoveFilter(Filterrow)"
                                src="./assets/images/tag-close.svg" /></a></li>
                </ul>
            </div>
            <div class="l-content w-100 pl-0">
                <div class="tbl-reports card-shadow bg-white h-100">
                    <div class="l-tbl-accordion overflow-auto">
                        <div class="w-100 border-0 p-3">
                            <div class="table-responsive">
                                <table class="l-tbl">
                                    <tr class="main-tr">
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Order Number</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Date</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Customer Name</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Division Id</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="text-nowrap d-flex align-items-center">
                                                <span>Status</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>
                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Amount(₹)</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            <div class="td-wrapp d-flex align-items-center">
                                                <span>Payment Mode</span>
                                                <!-- <i class="icon-sort ml-1"><img src="../../assets/images/sort.svg"
                                                        alt=""></i> -->
                                            </div>
                                        </td>

                                        <td>
                                            &nbsp;
                                        </td>
                                    </tr>
                                    <ng-container *ngIf="rowFailed.length >0">

                                        <tr *ngFor="let row of rowFailed" class="click-tr">
                                            <td class="text-nowrap">
                                                <div class="td-wrapp"
                                                    style=" text-decoration-line: underline; color: blue; cursor: pointer;"
                                                    routerLinkActive="active" (click)="failedClick(row)"> {{
                                                    row?.order_number }}</div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp"> {{ row?.order_date | date :'dd-MM-yyyy hh:mm:ss
                                                    a' }}</div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{row?.account_name}}
                                                </div>
                                            </td>

                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{row?.otc_return_to_account_id}}
                                                </div>
                                            </td>
                                            <td class="text-nowrap">
                                                <div class="td-wrapp d-flex align-items-center">
                                                    {{ row?.status }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ row?.total_amount | number }}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">
                                                    {{ row?.payment_method =='COD' ? 'On Credit': row?.payment_method
                                                    =='COD_LOYALTY' ? 'On Credit & Loyalty':row?.payment_method
                                                    =='WIRE_TRANSFER' ? 'Online Transfer' : row?.payment_method
                                                    =='WIRE_TRANSFER_LOYALTY' ? 'Online Transfer & Loyalty':
                                                    row?.payment_method}}
                                                </div>
                                            </td>
                                            <td>
                                                <div class="td-wrapp">

                                                </div>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="rowFailed.length == 0">
                                        <tr>
                                            No Data Found
                                        </tr>
                                    </ng-container>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="paging" style="margin-bottom: 40px;margin-top: 20px;">
                    <app-pagination [activePage]="currentPage" [totalRecords]="totalrecord" *ngIf="totalrecord>10"
                        [recordsPerPage]="noofrecordsperpage" (onPageChange)="pageChange($event)"
                        [showrecords]="showRecords"></app-pagination>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
<ng-template #orderDetails let-d="dismiss">
    <order-details [order]="orderInformations"></order-details>
</ng-template>
<ng-template #failorderDetails let-d="dismiss">
    <app-fail-order-popup [item]="faildata"></app-fail-order-popup>
</ng-template>
<ng-template #EOrderDownload let-d="dismiss">
    <app-report-download-popup [data]="EorderDownload" [count]="count" [pageName]="pageName">
    </app-report-download-popup>


</ng-template>
<ng-template #invoicePopup let-d="dismiss">
    <app-invoice-copy [data]="invoiceData" [otcnumber]="invoiceotc" [titile]="Titile"></app-invoice-copy>
</ng-template>